<div class="content-wrapper" ng-controller="RuleCtrl">
    <div class="row">
        <!--左侧视图-->
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="DGTitle row">
                <div class="col-md-5 col-xs-12">
                    <span style="font-size:30px">规则管理</span>
                    <button class="btn btn-primary btn-sm user" data-toggle="modal"
                            data-target="#addRule">+ 创建规则
                    </button>
                </div>
                <!--
                <div class="SearchDG">
                <span>搜索：<input type="text" style="width: 130px" placeholder="请输入规则id"
                                ng-model="$parent.ruleid"/></span>
                    <span class="Searchicon" ng-click="searchRule()" title="搜索">
                    <i class="fa fa-search fa-lg shand" aria-hidden="true"></i>
                </span>
                </div>
                -->
                <div class="input-group SearchDG col-md-5 col-xs-12">
                    <input type="text" class="form-control" placeholder="请输入规则名称..." id="searchRuleText">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button" ng-click="searchRule()"><i
                                class="fa fa-search"></i></button>
                    </span>
                </div>

            </div>
            <div class="DGContainer row" style="margin-left: -15px">
                <div ng-repeat="rule in Rules" class="chooseBtn col-lg-3 col-md-3 col-sm-3 col-xs-4" ng-click="showrule(rule)"
                        ng-style="rule.style" ng-mouseover="fadeSiblings()" ng-mouseout="reSiblings()">
                    <div>
                        <i class="fa fa-puzzle-piece fa-2x "></i>
                        <p>{{rule.rule.name}}</p>
                    </div>
                </div>
            </div>
        </div>
        <!--右侧视图-->
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="DGAssignContainer">
                <div class="DGTitle DGminTitle">
                    <span class="RightviewTitle">规则信息</span>
                    <div class="ruleiconcontainer">
                        <i class="fa fa-edit fa-lg ruleicon shand userDelete" title="编辑此规则"
                           data-toggle="modal" data-target="#editRuleInfo"></i>
                        <i class="fa fa-power-off fa-lg ruleicon shand userDelete" ng-show="Rulestart" title="激活规则"
                           data-toggle="modal" data-target="#startRule"></i>
                        <i class="fa fa-ban fa-lg ruleicon shand userDelete" ng-show="Rulestop" title="暂停规则"
                           data-toggle="modal" data-target="#stopRule"></i>
                        <i class="fa fa-trash-o fa-lg ruleicon shand userDelete" title="删除此规则"
                           data-toggle="modal" data-target="#delRule"></i>
                    </div>
                </div>
                <div class="item">
                    <p>规则名称：{{Ruleitem.rule.name}}<!--规则名称修改按钮
                    <i class="fa fa-pencil-square-o iedit shand" data-toggle="modal"
                       data-target="#editRuleName"></i>
                    </p.time}}  无此接口--></p>
                    <p>规则ID：{{Ruleitem.rule.ruleId}}</p>
                    <p>状态：<span ng-class="{true:'stateActive',false:'stateNActive'}[isActive]">

                    <i ng-class="{true:'fa fa-refresh fa-spin',false:'fa fa-refresh'}[isActive]"></i>
                    {{Ruleitem.rule.state}}
                </span></p>
                    <p>规则描述：{{Ruleitem.rule.additional_info}}
                        <!--规则描述修改按钮
                        <i class="fa fa-pencil-square-o iedit shand" data-toggle="modal"
                           data-target="#editRuleDes"></i>
                        </p.time}}   无此接口-->
                    </p>
                    <!--显示信息待完善-->
                </div>
            </div>
            <div class="DGAssignContainer">
                <div class="DGTitle DGminTitle">
                    <p class="RightviewTitle">规则详情</p>
                </div>

                <!--filter展示表格折叠效果-->
                <div class="item">
                    <table class="table table-bordered table-hover table-striped" style="table-layout:fixed">
                        <thead>
                        <tr>
                            <td style="width: 30px"></td>
                            <td>
                                <div style="float:right;margin-right: 5px" ng-click="isAddSingleFilter=true">
                                    <i class="fa fa-plus ruleicon shand" data-toggle="modal"
                                       data-target="#addruleFilter"></i></div>
                                过滤器详情
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat-start="data in RuleFilters" id="Filter{{$index}}">
                            <td>
                                <button class="btn btn-xs" ng-if="data.expanded" ng-click="data.expanded=false">-
                                </button>
                                <button class="btn btn-xs" ng-if="!data.expanded" ng-click="data.expanded=true">+
                                </button>
                            </td>
                            <td>{{data.name}}
                                <div style="float: right;">
                                    <i class="fa fa-trash-o fa-lg ruleicon shand userDelete" title="删除此过滤器"
                                       data-toggle="modal" data-target="#delFilter"
                                       ng-click="showEditFilterModal($index)"></i>
                                    <i class="fa fa-edit ruleicon shand userDelete" title="编辑此过滤器"
                                       data-toggle="modal" data-target="#editFilter"
                                       ng-click="showEditFilterModal($index)"></i>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="data.expanded" ng-repeat-end="">
                            <td></td>
                            <td colspan="1">
                                <div>过滤器名称：{{data.name}}</div>
                                <!--<p>过滤器类型：{{data.type||"无"}}</p>-->
                                <div>JS代码：
                                    <pre id="rule_jscode">{{data.jsCode}}</pre>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!--plugin展示表格折叠效果-->
                <div class="item">
                    <table class="table table-bordered table-hover table-striped" ng-show="!showEmpty"
                           style="table-layout:fixed">
                        <thead>
                        <td style="width: 30px"></td>
                        <td>
                            <div style="float:right;margin-right: 5px" ng-click="isAddSingleTransform=true;getAllplugin()" >
                                <i class="fa fa-plus ruleicon shand" data-toggle="modal"
                                   data-target="#addruleTransform"></i></div>
                            传输信息详情
                        </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat-start="data in RulePlugins" id="Plugin{{$index}}">
                            <td>
                                <button class="btn btn-xs" ng-if="data.expanded" ng-click="data.expanded=false">-
                                </button>
                                <button class="btn btn-xs" ng-if="!data.expanded"
                                        ng-click="data.expanded=true;showplugin(data,$index)">+
                                </button>
                            </td>
                            <td>{{data.name}}
                                <div style="float: right;">
                                    <i class="fa fa-trash-o fa-lg ruleicon shand userDelete" title="删除此传输信息"
                                       data-toggle="modal" data-target="#delPlugin"
                                       ng-click="showEditPluginModal($index)"></i>
                                    <i class="fa fa-edit ruleicon shand userDelete" title="编辑此传输信息"
                                       data-toggle="modal" data-target="#editPlugin"
                                       ng-click="showEditPluginModal($index)"></i>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="data.expanded" ng-repeat-end="">
                            <td></td>
                            <td colspan="1" style="word-wrap:break-word;word-break: break-all">
                                <p>规则名称：{{data.name}}</p>
                                <p>跳转地址：{{data.url}}</p>
                                <div id="plugin_{{$index}}">
                                    <p>请求方法：{{data.requestBody.method}}</p>
                                    <p>请求地址：{{data.requestBody.url}}</p>
                                </div>
                                <div id="plugin_mail_{{$index}}" style="display: none">
                                    <p>收件人：{{data.requestBody.to}}</p>
                                    <p>事务：{{data.requestBody.subject}}</p>
                                    <p>内容：{{data.requestBody.text}}</p>
                                </div>
                                <div id="plugin_updatemessage_{{$index}}" style="display: none">
                                    <p>消息：{{data.requestBody.message}}</p>
                                    <p>消息类型：{{data.requestBody.messageType}}</p>
                                </div>
                                <div id="plugin_SMS_{{$index}}" style="display: none">
                                    <p>联系人：{{data.requestBody.phone}}</p>
                                    <p>短信内容：{{data.requestBody.text}}</p>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!--modal编辑规则-->
            <div class="modal fade" id="editRuleInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">
                                编辑规则
                            </h4>
                        </div>
                        <div class="modal-body">
                            <p>规则名称:<input value={{Ruleitem.rule.name}} id="editRuleInfo_name"/></p>
                            <p>规则描述:<input value={{Ruleitem.rule.additional_info}} id="editRuleInfo_addition"/></p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clearForm()">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="editRuleInfo()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal删除规则-->
            <div class="modal fade" id="delRule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                删除规则
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定删除此规则？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="delRule()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal运行-激活规则-->
            <div class="modal fade" id="startRule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                激活规则
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定激活此规则？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="startRule()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal运行-暂停规则-->
            <div class="modal fade" id="stopRule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                暂停规则
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定停止运行此规则？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="stopRule()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal删除规则-删除过滤器-->
            <div class="modal fade" id="delFilter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                删除过滤器
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定删除此过滤器？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="delFilter()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal删除规则-删除传输信息-->
            <div class="modal fade" id="delPlugin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                删除传输信息
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定删除此传输信息？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="delPlugin()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal编辑规则-编辑过滤器-->
            <div class="modal fade" id="editFilter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">
                                编辑过滤器
                            </h4>
                        </div>
                        <div class="modal-body">
                            <p>过滤器ID：<span>{{editfilter.filterId}}</span></p>
                            <p>过滤器名称：<input value="{{editfilter.name}}" id="editFilter_name"/></p>
                            <p>编辑JS代&emsp;码：<textarea rows="7" cols="55"
                                                      id="editFilter_jscode">{{editfilter.jsCode}}</textarea>
                            </p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="resetEdit()">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="editFilter()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <!--modal编辑规则-编辑传输信息-->
            <div class="modal fade" id="editPlugin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">
                                编辑传输信息
                            </h4>
                        </div>
                        <div class="modal-body">
                            <p>传输信息ID：<span>{{editplugin.transformId}}</span></p>
                            <p>method：<span>{{editplugin.method}}</span></p>
                            <p>传输信息名称：<input value="{{editplugin.name}}" id="editPlugin_name"/></p>
                            <p>传输信息url ：<textarea rows="3" cols="55" id="editPlugin_url">{{editplugin.url}}</textarea>
                            </p>
                            <p>传输信息内容：<textarea rows="7" cols="55" id="editPlugin_requestBody">{{editplugin.requestBody}}</textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="editPlugin()">
                                确定
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

        </div>

     

        <!--modal创建规则-->
        <div class="modal fade" id="addRule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title">
                            添加规则
                        </h4>
                    </div>
                    <div class="modal-body" style="height: 450px;overflow: auto"><!--解决嵌套模态框滚动条bug-->
                        <form>
                            <!--添加规则组基本信息-->
                            <p><span class="StarMark">*</span>规则名称：<input type="text" name="rulename"
                                                                          ng-model="formData.rule.name"
                                                                          placeholder="请输入规则组名称">
                                <span class="alertempty" id="rulenamealert">请输入规则名称</span>
                            </p>
                            <p><span style="vertical-align:top;margin-left: 10px">描&emsp;&emsp;述：</span><textarea
                                    name="additional_info"
                                    ng-model="formData.rule.additional_info"
                                    placeholder="请添加对规则的描述..."
                                    style="height:120px;width: 450px;"></textarea>
                            </p>
                            <hr/>

                            <!--添加过滤器-->
                            <h4>添加过滤器</h4>
                            <!--添加过滤器modal后显示-->
                            <table class="table table-bordered table-hover addfiltertab" ng-show="showaddFilter">
                                <thead><!--bootstrap的table样式，简单快捷-->
                                <tr>
                                    <th>过滤器名称</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="filter in formData.filters">
                                    <td>{{filter.name}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <button style="margin-left:5px" class="btn btn-primary btn-sm" data-toggle="modal"
                                    data-target="#addruleFilter">+ 添加过滤器
                            </button>
                            <hr/>

                            <!--添加插件-->
                            <h4>添加插件</h4>
                            <!--添加插件后显示-->
                            <table class="table table-bordered table-hover addfiltertab" ng-show="showaddTransform">
                                <thead><!--bootstrap的table样式，简单快捷-->
                                <tr>
                                    <th>插件名称</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="plugin in formData.transforms">
                                    <td>{{plugin.name}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <button style="margin-left:5px" class="btn btn-primary btn-sm" data-toggle="modal"
                                    data-target="#addruleTransform" ng-click="getAllplugin()">+ 添加插件
                            </button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clearForm()">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="createRule()">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

        <!--model创建规则-添加过滤器-->
        <div class="modal fade" id="addruleFilter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title">
                            添加过滤器
                        </h4>
                    </div>

                    <div class="modal-body">
                        <form name="addfilter">
                            <p><span class="StarMark">*</span>过滤器名称：<input type="text" name="addname"
                                                                           id="addfiltername"
                                                                           placeholder="请输入过滤器名称" required/>
                                <!--<span class="alertempty" id="filternamealert">请输入过滤器名称</span>-->
                            </p>
                            <p style="margin-left: 10px;">按类型配置：
                                <select ng-model="addFilterType" class="selectNeedClear"
                                        ng-options="x.name for x in FilterType"
                                        ng-change="changefiltertype(addFilterType)">
                                    <option value="" disabled>--请选择配置类型--</option>
                                </select>
                            </p>
                            <!--配置1-单个设备-->
                            <div ng-show="addFilterType.type===1">
                                <hr/>
                                <table>
                                    <tr>
                                        <td><span class="StarMark">*</span>设备名称：</td>
                                        <td><input id="add_filter_devicename" placeholder="请填写绑定设备名称"
                                                   style="margin-bottom:5px "/>
                                            <a href="javascript:void(0)" ng-click="showDeviceID()"
                                               style="padding-left: 20px"
                                               id="link_bind_device">{{text_deviceid}}设备ID</a></td>
                                    </tr>
                                    <tr ng-if="ifDeviceID">
                                        <td><span class="StarMark">*</span>设备ID：</td>
                                        <td><input id="add_filter_deviceid" placeholder="请填写绑定设备ID"
                                                   style="margin-bottom:5px "/><span
                                                style="padding-left: 20px;color: #a8a8a8">设备ID应与设备名称对应</span></td>
                                    </tr>
                                    <tr>
                                        <td><span class="StarMark">*</span>过滤规则key：</td>
                                        <td><input id="add_filter_key1" type="text" placeholder="例：temperature"
                                                   style="margin-bottom:5px "/></td>
                                    </tr>
                                    <tr>
                                        <td><span class="StarMark">*</span>过滤规则value：</td>
                                        <td><input id="add_filter_value1" type="text" placeholder="例：>50"
                                                   style="margin-bottom:5px "/></td>
                                    </tr>
                                </table>
                            </div>
                            <!--配置2-同类型设备-->
                            <div ng-show="addFilterType.type===2">
                                <hr/>
                                <table>
                                    <tr>
                                        <td><span class="StarMark">*</span>绑定厂商：</td>
                                        <td>
                                            <!--<input id="add_filter_manufacture" type="text" placeholder="请填写绑定厂商名称">-->
                                            <select ng-model="myManufacture" style="margin-bottom:5px"
                                                    ng-change="getDeviceType(myManufacture)"
                                                    ng-options="x.manufacturerName for x in manufacturerInfo">
                                                <option value="" disabled>--请选择厂商--</option>
                                            </select>
                                            <a href="javascript:void(0)" ng-click="showDeviceType()"
                                               style="padding-left: 20px">{{text_devicetype}}设备类型</a>
                                            <a href="javascript:void(0)" ng-click="showDeviceModel()"
                                               style="padding-left: 20px">{{text_devicemodel}}设备型号</a></td>
                                    </tr>
                                    <tr ng-if="ifDeviceType||ifDeviceModel">
                                        <td><span class="StarMark">*</span>设备类型：</td>
                                        <td>
                                            <!--<input id="add_filter_devicetype" type="text" placeholder="请填写绑定设备类型"/>-->
                                            <select ng-model="$parent.myDeviceType" style="margin-bottom:5px"
                                                    ng-change="getDeviceModel(myDeviceType)"
                                                    ng-options="x.deviceTypeName for x in deviceTypeInfo">
                                                <option value="" disabled>--请选择设备类型--</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr ng-if="ifDeviceModel">
                                        <td><span class="StarMark">*</span>设备型号：</td>
                                        <td>
                                            <!--<input id="add_filter_devicemodel" type="text" placeholder="请填写绑定设备型号"-->
                                            <!--style="margin-bottom:5px "/>-->
                                            <select ng-model="$parent.myDeviceModel" style="margin-bottom:5px"
                                                    ng-options="x.modelName for x in deviceModelInfo">
                                                <option value="" disabled>--请选择设备型号--</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="StarMark">*</span>过滤规则key：</td>
                                        <td><input id="add_filter_key2" type="text" placeholder="例：temperature"
                                                   style="margin-bottom:5px "/></td>
                                    </tr>
                                    <tr>
                                        <td><span class="StarMark">*</span>过滤规则value：</td>
                                        <td><input id="add_filter_value2" type="text" placeholder="例：>50"
                                                   style="margin-bottom:5px "/></td>
                                    </tr>
                                </table>
                            </div>
                            <!--配置3-自定义js代码-->
                            <div ng-show="addFilterType.type===3">
                                <hr/>
                                <div style="margin-left: 10px;vertical-align:top;">JS&emsp;代&emsp;码：<textarea
                                        name="addjscode" id="addfilterjs"
                                        style="height:150px;width: 470px"/>
                                </div>
                            </div>
                            <input type="reset" style="display:none;"/>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"
                                ng-click="clearFilterPlugin('#addruleFilter')">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="subFilter()">
                            确定
                        </button>
                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

        <!--model创建规则-添加插件-->
        <div class="modal fade" id="addruleTransform" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title">
                            添加插件
                        </h4>
                    </div>
                    <div class="modal-body">
                        <div ng-show="!isPluginReady">获取插件中...请耐心等待</div>
                        <form name="addplugin" ng-show="isPluginReady">
                            <p>名&emsp;&emsp;称：<select ng-model="RuleaddPlugin" ng-change="change(RuleaddPlugin)"
                                                      id="addpluginselect"
                                                      ng-options="x.name for x in Plugin">
                                <option value="" disabled>--请选择插件--</option>
                            </select>
                            </p>
                            <p style="word-wrap:break-word">描&emsp;&emsp;述：{{RuleaddPlugin.describe}}</p>
                            <p style="word-break: break-all">跳转地址：{{RuleaddPluginUrl}}</p>
                            <p ng-show="showsendmail">请求方式：<input type="text" name="method" disabled="disabled"
                                                                  id="pluginmethodMail"
                                                                  value="POST"/>
                            </p>
                            <!--判断是restful插件-->
                            <p ng-show="showrestful">请求方式：<select id="pluginmethodRest"
                                                                  ng-model="RuleaddPlugin.method"
                                                                  ng-options="x for x in RESTMethod"
                                                                  ng-change="changemethod(RuleaddPlugin.method)">
                                <option value="" disabled>--请选择请求方式--</option>
                            </select>
                            </p>
                            <p ng-show="showrestful">请求地址：<input type="text" id="RestfulBody_url"
                                                                 style="width: 75%;"/></p>
                            <p ng-show="showrestfulPOST"><span
                                    style="vertical-align:top">Requestbody：</span><textarea
                                    style="height:120px;width: 70%;" id="RestfulBody_body"></textarea>
                            </p>

                            <!--判断是updatemessage插件-->
                            <p ng-show="showupdatemessage"><span
                                    style="vertical-align:top">Message：</span><textarea
                                    style="height:120px;width: 70%;" id="addUpdateMessageText"></textarea>
                            </p>

                            <!--判断是SMS插件-->
                            <div ng-show="showSMS">
                                <div>
                                    <hr/>
                                    <!--添加多个收件人-->
                                    <div ng-repeat="replySMS in fchat.replies">
                                        <p>
                                            联系人{{$index + 1}}&ensp;：<input type="text" ng-model="replySMS.value"
                                                                           id="replySMS{{$index + 1}}"
                                                                           name="replySMS{{$index + 1}}"
                                                                           placeholder="请输入联系人电话"/>
                                            <a href="" ng-click="fchat.incrReply($index)">
                                                <i class="fa fa-plus"></i>
                                            </a>
                                            <a href="" ng-click="fchat.decrReply($index)"
                                               ng-show="fchat.canDescReply">
                                                <i class="fa fa-minus"></i>
                                            </a>
                                            <i class="fa fa-minus" ng-show="!fchat.canDescReply"/></a>
                                        </p>
                                    </div>
                                    <!--添加多个收件人End-->
                                    <p>短信内容：<input type="text" name="SMStext" id="addTranSMSText"
                                                   placeholder="请输入短信内容">
                                    </p>
                                    <input type="reset" style="display:none;"/>
                                </div>
                            </div>

                            <!--判断是sendmail插件-->
                            <div ng-show="showsendmail">
                                <div>
                                    <hr/>
                                    <!--添加多个收件人-->
                                    <div ng-repeat="reply in fchat.replies">
                                        <p>
                                            收件人{{$index + 1}}&ensp;：<input type="text" ng-model="reply.value"
                                                                           id="reply{{$index + 1}}"
                                                                           name="reply{{$index + 1}}"
                                                                           placeholder="请输入收件人"/>
                                            <a href="" ng-click="fchat.incrReply($index)">
                                                <i class="fa fa-plus"></i>
                                            </a>
                                            <a href="" ng-click="fchat.decrReply($index)"
                                               ng-show="fchat.canDescReply">
                                                <i class="fa fa-minus"></i>
                                            </a>
                                            <i class="fa fa-minus" ng-show="!fchat.canDescReply"/></a>
                                        </p>
                                    </div>
                                    <!--添加多个收件人End-->
                                    <p>邮件主题：<input type="text" name="mailtitle" id="addTranMailSub"
                                                   placeholder="请输入邮件主题">
                                    </p>
                                    <p>邮件内容：<input type="text" name="mailcontext" id="addTranMailText"
                                                   style="height:100px;width: 450px"/>
                                    </p>
                                    <input type="reset" style="display:none;"/>
                                </div>
                            </div>

                            <!--判断是sql插件-->
                            <div ng-show="showSQL">
                                <p>telemetry_key：<input type="text" id="SQLPlugin_telemetryKey"
                                                                     style="width: 75%;"/></p>
                            </div>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"
                                ng-click="clearFilterPlugin('#addruleTransform')">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="subTransform()"
                                data-dismiss="modal">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>


    </div>
</div>